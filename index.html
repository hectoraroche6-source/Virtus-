<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>VIRTUD</title>

<style>
body{
    margin:0;
    font-family:Arial, Helvetica, sans-serif;
    background:#0f172a;
    color:white;
}

/* PORTADA */
#cover{
    height:100vh;
    display:flex;
    flex-direction:column;
    justify-content:center;
    align-items:center;
    text-align:center;
}

#enterBtn{
    padding:15px 35px;
    border:none;
    background:#00e5ff;
    color:black;
    font-weight:bold;
    border-radius:30px;
    cursor:pointer;
}

/* SITIO */
#mainSite{
    display:none;
}

header{
    padding:20px;
    text-align:center;
    background:#111827;
    font-size:22px;
    font-weight:bold;
    color:#00e5ff;
}

/* BUSCADOR */
.search{
    text-align:center;
    margin:20px;
}

.search input{
    width:80%;
    padding:10px;
    border-radius:20px;
    border:none;
}

/* PRODUCTOS */
.products{
    display:grid;
    grid-template-columns:repeat(auto-fit,minmax(200px,1fr));
    gap:20px;
    padding:20px;
}

.card{
    background:#1f2937;
    padding:15px;
    border-radius:10px;
    text-align:center;
}

.card button{
    margin-top:10px;
    padding:8px;
    border:none;
    background:#00e5ff;
    font-weight:bold;
    border-radius:6px;
    cursor:pointer;
}

/* MINI CARRITO */
.miniCart{
    position:fixed;
    right:20px;
    bottom:20px;
    background:#00e5ff;
    color:black;
    padding:10px 15px;
    border-radius:30px;
    cursor:pointer;
    font-weight:bold;
}

.miniCart span{
    background:black;
    color:#00e5ff;
    padding:2px 6px;
    border-radius:50%;
    margin-left:5px;
}

/* PANEL CARRITO */
.cartPanel{
    position:fixed;
    right:-350px;
    top:0;
    width:300px;
    height:100%;
    background:#111827;
    padding:20px;
    transition:0.3s;
    overflow:auto;
}

.cartPanel.active{
    right:0;
}

.cartPanel button{
    margin-top:5px;
    padding:5px;
    border:none;
    border-radius:5px;
    cursor:pointer;
}
</style>
</head>

<body>

<!-- PORTADA -->
<div id="cover">
    <h1>VIRTUD</h1>
    <button id="enterBtn" onclick="enterSite()">Entrar</button>
</div>

<!-- CONTENIDO -->
<div id="mainSite">

<header>VIRTUD TIENDA</header>

<div class="search">
    <input type="text" id="searchInput" placeholder="Buscar..." onkeyup="searchProduct()">
</div>

<div class="products" id="productContainer"></div>

</div>

<!-- MINI CARRITO -->
<div class="miniCart" onclick="toggleCart()">
ðŸ›’ <span id="cartCount">0</span>
</div>

<!-- PANEL CARRITO -->
<div class="cartPanel" id="cartPanel">
<h3>Carrito</h3>
<ul id="cartItems"></ul>
<p>Total: $<span id="cartTotal">0</span></p>
<button onclick="clearCart()">Vaciar</button>
</div>

<script>

let products = [
    {name:"Producto A", price:100},
    {name:"Producto B", price:200},
    {name:"Producto C", price:300}
];

let cart = [];

/* ENTRAR */
function enterSite(){
    document.getElementById("cover").style.display="none";
    document.getElementById("mainSite").style.display="block";
}

/* MOSTRAR PRODUCTOS */
function renderProducts(list){
    let container = document.getElementById("productContainer");
    container.innerHTML = "";
    list.forEach(function(p,index){
        container.innerHTML +=
        '<div class="card">' +
        '<h3>'+p.name+'</h3>' +
        '<p>$'+p.price+'</p>' +
        '<button onclick="addToCart('+index+')">Agregar</button>' +
        '</div>';
    });
}

/* BUSCADOR */
function searchProduct(){
    let value = document.getElementById("searchInput").value.toLowerCase();
    let filtered = products.filter(function(p){
        return p.name.toLowerCase().includes(value);
    });
    renderProducts(filtered);
}

/* CARRITO */
function toggleCart(){
    document.getElementById("cartPanel").classList.toggle("active");
}

function updateCart(){
    let cartItems = document.getElementById("cartItems");
    let cartCount = document.getElementById("cartCount");
    let cartTotal = document.getElementById("cartTotal");

    cartItems.innerHTML = "";
    let total = 0;

    cart.forEach(function(item,index){
        total += item.price * item.qty;
        cartItems.innerHTML +=
        '<li>'+item.name+' x'+item.qty+
        ' <button onclick="changeQty('+index+',1)">+</button>'+
        ' <button onclick="changeQty('+index+',-1)">-</button>'+
        '</li>';
    });

    cartCount.textContent = cart.length;
    cartTotal.textContent = total;
}

function addToCart(index){
    let product = products[index];
    let existing = cart.find(function(c){
        return c.name === product.name;
    });

    if(existing){
        existing.qty++;
    } else {
        cart.push({name:product.name, price:product.price, qty:1});
    }

    updateCart();
}

function changeQty(index,change){
    cart[index].qty += change;
    if(cart[index].qty <= 0){
        cart.splice(index,1);
    }
    updateCart();
}

function clearCart(){
    cart = [];
    updateCart();
}

renderProducts(products);

</script>

</body>
</html>
