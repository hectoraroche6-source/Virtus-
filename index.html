<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>VIRTUD</title>

<style>
body{
margin:0;
font-family:Arial, Helvetica, sans-serif;
background:#0a0f1f;
color:white;
}

/* PORTADA */
#landing{
position:fixed;
top:0;
left:0;
right:0;
bottom:0;
display:flex;
flex-direction:column;
justify-content:center;
align-items:center;
background:#000814;
z-index:1000;
}

#landing h1{
letter-spacing:5px;
}

.enter-btn{
padding:12px 40px;
margin-top:20px;
border:none;
cursor:pointer;
background:#00f2ff;
font-weight:bold;
}

/* APP */
#app{
display:none;
}

/* HEADER */
header{
text-align:center;
padding:15px;
background:#111;
}

/* BUSCADOR */
.search{
width:90%;
margin:15px auto;
display:block;
padding:10px;
}

/* GRID */
.grid{
display:grid;
grid-template-columns:repeat(auto-fit,minmax(150px,1fr));
gap:10px;
padding:15px;
padding-bottom:100px;
}

.card{
background:#1c2541;
padding:10px;
border-radius:8px;
}

.card button{
margin-top:8px;
cursor:pointer;
}

/* MINI CARRITO */
.miniCart{
position:fixed;
right:20px;
bottom:20px;
background:#00f2ff;
color:black;
padding:10px 15px;
border-radius:20px;
cursor:pointer;
display:none;
}

/* PANEL CARRITO */
.cartPanel{
position:fixed;
right:-300px;
top:0;
width:280px;
height:100%;
background:#111;
padding:15px;
transition:0.3s;
overflow:auto;
}

.cartPanel.active{
right:0;
}

/* ADMIN */
.adminBtn{
position:fixed;
left:10px;
bottom:10px;
opacity:0.1;
cursor:pointer;
display:none;
}

.adminPanel{
position:fixed;
top:0;
left:0;
right:0;
bottom:0;
background:black;
display:none;
flex-direction:column;
align-items:center;
padding:30px;
}
</style>
</head>

<body>

<!-- PORTADA -->
<div id="landing">
<h1>VIRTUD</h1>
<button class="enter-btn" onclick="enterSite()">ENTRAR</button>
</div>

<!-- APP -->
<div id="app">

<header>
<h2>VIRTUD STORE</h2>
</header>

<input class="search" type="text" placeholder="Buscar..." onkeyup="searchProduct(this.value)">

<div class="grid" id="productGrid"></div>

<div class="miniCart" id="miniCart" onclick="toggleCart()">
üõí <span id="cartCount">0</span>
</div>

<div class="cartPanel" id="cartPanel">
<h3>Carrito</h3>
<ul id="cartItems"></ul>
<p>Total: $<span id="cartTotal">0</span></p>
<button onclick="clearCart()">Vaciar</button>
</div>

<div class="adminBtn" id="adminBtn" onclick="adminAccess()">üîê</div>

<div class="adminPanel" id="adminPanel">
<h3>Panel Admin</h3>
<input id="newName" placeholder="Nombre">
<input id="newPrice" type="number" placeholder="Precio">
<button onclick="addProduct()">Agregar</button>
<button onclick="closeAdmin()">Cerrar</button>
</div>

</div>

<script>

var products = [
{name:"Producto A",price:100},
{name:"Producto B",price:200},
{name:"Producto C",price:300}
];

var cart = [];

/* ENTRAR */
function enterSite(){
document.getElementById("landing").style.display="none";
document.getElementById("app").style.display="block";
document.getElementById("miniCart").style.display="block";
document.getElementById("adminBtn").style.display="block";
renderProducts(products);
}

/* RENDER */
function renderProducts(list){
var grid=document.getElementById("productGrid");
grid.innerHTML="";
for(var i=0;i<list.length;i++){
grid.innerHTML +=
'<div class="card">'+
'<h4>'+list[i].name+'</h4>'+
'<p>$'+list[i].price+'</p>'+
'<button onclick="addToCartByName(\''+list[i].name+'\')">Agregar</button>'+
'</div>';
}
}

/* BUSCADOR */
function searchProduct(text){
var filtered=[];
for(var i=0;i<products.length;i++){
if(products[i].name.toLowerCase().indexOf(text.toLowerCase())!==-1){
filtered.push(products[i]);
}
}
renderProducts(filtered);
}

/* AGREGAR CARRITO SEGURO */
function addToCartByName(name){
var product=null;
for(var i=0;i<products.length;i++){
if(products[i].name===name){
product=products[i];
break;
}
}
if(product==null)return;

var found=false;
for(var j=0;j<cart.length;j++){
if(cart[j].name===name){
cart[j].qty++;
found=true;
break;
}
}
if(!found){
cart.push({name:product.name,price:product.price,qty:1});
}
updateCart();
}

function toggleCart(){
document.getElementById("cartPanel").classList.toggle("active");
}

function updateCart(){
var items=document.getElementById("cartItems");
items.innerHTML="";
var total=0;
for(var i=0;i<cart.length;i++){
total+=cart[i].price*cart[i].qty;
items.innerHTML +=
'<li>'+cart[i].name+' x'+cart[i].qty+
' <button onclick="changeQty('+i+',1)">+</button>'+
' <button onclick="changeQty('+i+',-1)">-</button>'+
'</li>';
}
document.getElementById("cartTotal").innerText=total;
document.getElementById("cartCount").innerText=cart.length;
}

function changeQty(index,val){
cart[index].qty+=val;
if(cart[index].qty<=0){
cart.splice(index,1);
}
updateCart();
}

function clearCart(){
cart=[];
updateCart();
}

/* ADMIN */
function adminAccess(){
var pass=prompt("Contrase√±a:");
if(pass==="separabit2020"){
document.getElementById("adminPanel").style.display="flex";
}
}

function closeAdmin(){
document.getElementById("adminPanel").style.display="none";
}

function addProduct(){
var name=document.getElementById("newName").value;
var price=parseFloat(document.getElementById("newPrice").value);

if(name!=="" && !isNaN(price)){
products.push({name:name,price:price});
renderProducts(products);
document.getElementById("newName").value="";
document.getElementById("newPrice").value="";
}
}

</script>

</body>
</html>
