<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>VIRTUD</title>

<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;600&display=swap" rel="stylesheet">

<style>
body{
    margin:0;
    font-family:'Orbitron',sans-serif;
    background:linear-gradient(135deg,#0a0a14,#111827);
    color:white;
}

/* PORTADA */
#cover{
    height:100vh;
    display:flex;
    flex-direction:column;
    justify-content:center;
    align-items:center;
    text-align:center;
}

#cover img{
    width:200px;
    margin-bottom:20px;
    border-radius:20px;
}

#enterBtn{
    padding:15px 35px;
    border:none;
    background:#00f2ff;
    color:black;
    font-weight:bold;
    border-radius:30px;
    cursor:pointer;
}

/* MAIN SITE */
#mainSite{
    display:none;
}

header{
    display:flex;
    justify-content:space-between;
    align-items:center;
    padding:20px 40px;
    background:rgba(255,255,255,0.05);
    backdrop-filter:blur(10px);
}

.logo{
    font-size:22px;
    color:#00f2ff;
}

/* BUSCADOR */
.search{
    text-align:center;
    padding:20px;
}

.search input{
    width:60%;
    padding:10px;
    border:none;
    border-radius:20px;
    outline:none;
}

/* PRODUCTOS */
.products{
    display:grid;
    grid-template-columns:repeat(auto-fit,minmax(250px,1fr));
    gap:20px;
    padding:40px;
}

.card{
    background:rgba(255,255,255,0.05);
    padding:20px;
    border-radius:15px;
}

.card button{
    width:100%;
    padding:10px;
    border:none;
    background:#00f2ff;
    cursor:pointer;
    font-weight:bold;
}

/* CARRITO */
.cart{
    position:fixed;
    right:20px;
    bottom:20px;
    background:#111;
    padding:20px;
    border-radius:15px;
    width:280px;
    box-shadow:0 0 20px #00f2ff;
}

.cart ul{
    list-style:none;
    padding:0;
    max-height:150px;
    overflow:auto;
}

.cart button{
    margin-top:5px;
    padding:5px;
}

/* ACCESO SECRETO */
#secretAccess{
    position:fixed;
    bottom:5px;
    left:5px;
    width:40px;
    height:40px;
    opacity:0.05;
    cursor:pointer;
}
</style>
</head>

<body>

<!-- PORTADA -->
<div id="cover">
    <img src="https://via.placeholder.com/200">
    <h1>VIRTUD</h1>
    <button id="enterBtn" onclick="enterSite()">Entrar</button>
</div>

<!-- SITIO -->
<div id="mainSite">

<header>
    <div class="logo">VIRTUD</div>
</header>

<div class="search">
    <input type="text" id="searchInput" placeholder="Buscar producto..." onkeyup="searchProduct()">
</div>

<div class="products" id="productContainer"></div>

<div class="cart">
    <h3>Carrito (<span id="cartCount">0</span>)</h3>
    <ul id="cartItems"></ul>
    <p>Total: $<span id="cartTotal">0</span></p>
    <button onclick="clearCart()">Vaciar</button>
    <button onclick="sendWhatsApp()">Comprar</button>
</div>

</div>

<!-- BOTÓN SECRETO -->
<div id="secretAccess" onclick="adminAccess()"></div>

<script>

let products = [
    {name:"Producto A", price:100},
    {name:"Producto B", price:200},
    {name:"Producto C", price:300}
];

let cart = JSON.parse(localStorage.getItem("cart")) || [];

/* ENTRAR */
function enterSite(){
    document.getElementById("cover").style.display="none";
    document.getElementById("mainSite").style.display="block";
}

/* MOSTRAR PRODUCTOS */
function renderProducts(list){
    const container=document.getElementById("productContainer");
    container.innerHTML="";
    list.forEach((p,index)=>{
        container.innerHTML+=`
        <div class="card">
            <h3>${p.name}</h3>
            <p>$${p.price}</p>
            <button onclick="addToCart(${index})">Agregar</button>
        </div>`;
    });
}

/* BUSCADOR INTELIGENTE */
function searchProduct(){
    let value=document.getElementById("searchInput").value.toLowerCase();
    let filtered=products.filter(p=>p.name.toLowerCase().includes(value));
    renderProducts(filtered);
}

/* CARRITO */
function updateCart(){
    const cartItems=document.getElementById("cartItems");
    const cartCount=document.getElementById("cartCount");
    const cartTotal=document.getElementById("cartTotal");

    cartItems.innerHTML="";
    let total=0;

    cart.forEach((item,i)=>{
        total+=item.price*item.qty;
        cartItems.innerHTML+=`
        <li>
        ${item.name} x${item.qty}
        <button onclick="changeQty(${i},1)">+</button>
        <button onclick="changeQty(${i},-1)">-</button>
        <button onclick="removeItem(${i})">x</button>
        </li>`;
    });

    cartCount.textContent=cart.length;
    cartTotal.textContent=total;
    localStorage.setItem("cart",JSON.stringify(cart));
}

function addToCart(index){
    let product=products[index];
    let existing=cart.find(c=>c.name===product.name);
    if(existing){
        existing.qty++;
    }else{
        cart.push({...product, qty:1});
    }
    updateCart();
}

function changeQty(index,change){
    cart[index].qty+=change;
    if(cart[index].qty<=0){
        cart.splice(index,1);
    }
    updateCart();
}

function removeItem(index){
    cart.splice(index,1);
    updateCart();
}

function clearCart(){
    cart=[];
    updateCart();
}

function sendWhatsApp(){
    let message="Hola quiero comprar:%0A";
    cart.forEach(item=>{
        message+=`${item.name} x${item.qty} - $${item.price*item.qty}%0A`;
    });
    window.open(`https://wa.me/5358876921?text=${message}`);
}

/* PANEL SECRETO */
function adminAccess(){
    let pass=prompt("Contraseña:");
    if(pass==="separabit2020"){
        alert("Acceso concedido al panel (simulado)");
    }
}

renderProducts(products);
updateCart();

</script>

</body>
</html>
